<html><body bgcolor="#ccffcc" text="#000000"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>Matthew99 was the predicted champion of IOI2017. Zhangzj, the Emperor of Yali Empire, warned that if Matthew99 failed the competition, he would be met with fire and fury, like the world had never seen before. However, Matthew99 totally sucked and only got a silver medal. Therefore, Zhangzj demanded Matthew99 to be arrested upon his arrivial to the empire.</p>

<p>Scared, Matthew99 turned to a priest for help. The priest said that his sin could be redeemed only if he proved that he had the ability to get a better place. Thus, he gave Matthew99 the last chance to prove himself.</p>

<p>
There are two polylines in the plane.
Each polyline consists of N vertices.
The first polyline lies strictly above the x axis and the second polyline lies strictly below the x axis.
</p>
<p>
You are given four vector &lt;int&gt;s: <b>X1</b>, <b>Y1</b>, <b>X2</b>, and <b>Y2</b>, each with N elements.
The first polyline consists of the vertices (<b>X1</b>[0], <b>Y1</b>[0]), ..., (<b>X1</b>[N-1], <b>Y1</b>[N-1]), the second one is defined in the same way using <b>X2</b> and <b>Y2</b>.
</p>
<p>
Each polyline goes from the left to the right. Formally, the coordinates given in <b>X1</b> and <b>X2</b> are strictly increasing.
</p>
<p>
Additionally, the points of the polylines are placed so that:
<ul>
<li>If we connected the first and the last vertex of the first polyline to the point (0, 10^10000), we would get the boundary of a convex polygon P1.</li>
<li>If we connected the first and the last vertex of the second polyline to the point (0, -10^10000), we would get the boundary of a convex polygon P2.</li>
</ul>
</p>
<p>
Finally, the 2N given points are placed so that no three of them are collinear.
</p>
<p>
A <i>traversal</i> is a sequence of 2N points that has the following properties:
<ul>
<li>It contains each vertex of each polyline exactly once.</li>
<li>Two consecutive points in the traversal cannot belong to the same polyline.</li>
<li>The line segment that connects two consecutive points in the traversal cannot intersect the polygons P1 and P2.</li>
</ul>
</p>
<p>
The length of the traversal is the sum of Euclidean distances between consecutive points in the traversal.
</p>
<p>
Matthew99 was given the task to find the shortest possible traversal.
Of course, Matthew99 was too weak and only deserved a silver medal.
Therefore, he didn't manage to solve it.
His sin was not redeemed and he was imprisoned by Zhangzj.
</p>
<p>
After hearing Matthew99's sad story, you feel sorry for him and you are relieved that as least you are not as weak as he was.
Solve this problem to prove that you are stronger than him!
Return the minimal length of a traversal.
If there is no valid traversal, return -1 instead.
</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>RedemptionOfMatthew99</td></tr><tr><td>Method:</td><td>bestTraversal</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double bestTraversal(vector &lt;int&gt; X1, vector &lt;int&gt; Y1, vector &lt;int&gt; X2, vector &lt;int&gt; Y2)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td><p>The returned value must have an absolute or relative error less than 10<sup>-9</sup>.</p></td></tr><tr><td align="center" valign="top">-</td><td><p>A convex polygon is a simple polygon (not self-intersecting) in which no line segment between two points on the boundary ever goes outside the polygon.</p></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td>N will be between 2 and 1,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>X1</b>, <b>Y1</b>, <b>X2</b>, and <b>Y2</b> will each contain exactly N elements.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>X1</b>, <b>Y1</b>, <b>X2</b>, and <b>Y2</b> will be between -1,000,000,000 and 1,000,000,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>For each valid i, <b>Y1</b>[i] will be greater than 0, and <b>Y2</b>[i] will be less than 0.</td></tr><tr><td align="center" valign="top">-</td><td>For each valid i, <b>X1</b>[i] will be less than <b>X1</b>[i + 1]; and <b>X2</b>[i] will be less than <b>X2</b>[i + 1].</td></tr><tr><td align="center" valign="top">-</td><td>No three of the 2N points described by <b>X1</b>, <b>Y1</b>, <b>X2</b>, and <b>Y2</b> will be collinear.</td></tr><tr><td align="center" valign="top">-</td><td>The 2N points described by <b>X1</b>, <b>Y1</b>, <b>X2</b>, and <b>Y2</b> will form the two convex polygons as described in the statement.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0, 1}</pre></td></tr><tr><td><pre>{1, 1}</pre></td></tr><tr><td><pre>{0, 1}</pre></td></tr><tr><td><pre>{-1, -1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 6.23606797749979</pre></td></tr><tr><td><table><tr><td colspan="2">The first polyline consists of the points (0, 1) and (1, 1).
The second polyline consists of the points (0, -1) and (1, -1).

One of the best traversals is (0, 1) &rarr; (0, -1) &rarr; (1, 1) &rarr; (1, -1), yielding a total distance of 4 + sqrt(5).</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0, 1, 2}</pre></td></tr><tr><td><pre>{2, 1, 2}</pre></td></tr><tr><td><pre>{0, 1, 2}</pre></td></tr><tr><td><pre>{-2, -1, -2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 16.32455532033676</pre></td></tr><tr><td><table><tr><td colspan="2">One of the best traversals will be (0, 2) &rarr; (0, -2) &rarr; (1, 1) &rarr; (1, -1) &rarr; (2, 2) &rarr; (2, -2).</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{-2, 2}</pre></td></tr><tr><td><pre>{1, 5}</pre></td></tr><tr><td><pre>{-2, 2}</pre></td></tr><tr><td><pre>{-1, -4}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 15.614226788360828</pre></td></tr><tr><td><table><tr><td colspan="2">This time one of the best traversals will be (2, -4) &rarr; (-2, 1) &rarr; (-2, -1) &rarr; (2, 5).</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{-2, 1, 2}</pre></td></tr><tr><td><pre>{1, 2, 6}</pre></td></tr><tr><td><pre>{-3, -2, -1}</pre></td></tr><tr><td><pre>{-1, -1, -2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: -1.0</pre></td></tr><tr><td><table><tr><td colspan="2">There is no solution.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{331, 667, 2926, 3285}</pre></td></tr><tr><td><pre>{536, 375, 375, 596}</pre></td></tr><tr><td><pre>{760, 1291, 2251, 2939}</pre></td></tr><tr><td><pre>{-615, -428, -428, -636}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 8698.860039486546</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
