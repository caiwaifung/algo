<html><body bgcolor="#ffffcc" text="#000000"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>The card game War is usually played with 52 cards.
Alice and Bob enjoy the game so much that they have modified it to use N cards, and they have changed the rules significantly.
The rules of their game are as follows:</p>
<br></br>
<p>The cards are numbered from 0 to N-1.
At the beginning of the game, each of the N cards is assigned to either Alice or Bob with equal probability.
The choices are made independently of each other and there is no guarantee that the players will receive the same number of cards.</p>
<br></br>
<p>The game consists of a series of steps.
In each step, a pair of cards is selected uniformly at random from all possible pairs that consist of two distinct cards.
The owner of the lower-numbered card becomes the owner of both cards in the pair.
(If that player already owned both cards, nothing changes, but it still counts as a step.)</p>
<br></br>
<p>The game ends as soon as all cards are owned by the same player.
Note that the game can end without any steps if all cards are initially assigned to the same player.</p>
<br></br>
<p>Carol watches Alice and Bob play the game.
She likes peas, so she has invented the following rules for herself:
Before the beginning of the game Carol chooses a specific state, i.e., a specific way cards are distributed between Alice and Bob.
At the beginning of the game and also after each step, if the current state is Carol's chosen state, she eats a pea.</p>
<br></br>
<p>You are given Carol's chosen state as a string <b>state</b>.
For each valid i, <b>state</b>[i] is either 'A' or 'B', indicating whether card i is owned by Alice or Bob.</p>
<br></br>
<p>We are interested in the expected number of peas Carol will eat during a game.
This number can always be written as p / q, where p and q are positive coprime integers.
Let X be an integer such that X * q is congruent to p, modulo 1,000,000,007.
Return the value (X mod 1,000,000,007).</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>WarAndPeas</td></tr><tr><td>Method:</td><td>expectedPeas</td></tr><tr><td>Parameters:</td><td>string</td></tr><tr><td>Returns:</td><td>int</td></tr><tr><td>Method signature:</td><td>int expectedPeas(string state)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>It can be proved that for the given constraints the return value always exists and it is unique.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td>N will be between 2 and 1000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>The length of <b>state</b> will be exactly N.</td></tr><tr><td align="center" valign="top">-</td><td>Each character of <b>state</b> will be 'A' or 'B'.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;AB&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 250000002</pre></td></tr><tr><td><table><tr><td colspan="2">The game will never be in Carol's chosen state after a step.
Therefore, Carol will only eat a single pea if the initial state of the game is her chosen state.
This happens with probability 1 / 4, hence the expected number of peas Carol will eat is also 1 / 4.
The correct return value is 250,000,002 because (4 * 250,000,002) mod 1,000,000,007 = 1.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;BAB&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 375000003</pre></td></tr><tr><td><table><tr><td colspan="2">The expected number of peas eaten by Carol is 3 / 8.
The correct return value is 375,000,003 because (375,000,003 * 8) mod 1,000,000,007 = 3.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;AABBBBB&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 973437507</pre></td></tr><tr><td><table><tr><td colspan="2">Here the expected number of peas eaten by Carol is 119 / 640.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 500000004</pre></td></tr><tr><td><table><tr><td colspan="2">In this test case the expected number of peas eaten by Carol is 1 / 2.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;BABABBABAAABABBBBABABBABAABAAABAABAAAABBBBBBABBBBAB&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 330545639</pre></td></tr><tr><td><table><tr><td colspan="2">For this state Carol is expected to eat 3095183339246779 / 13989277223419852125116563456 peas.</td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
