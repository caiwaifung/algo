<html><body bgcolor="#ccffcc" text="#000000"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td>Fox Ciel has a map of the night sky.
On this map she found a constellation that consists of n stars, numbered 0 through n-1 in no particular order.<br></br>
<br></br>
<br></br>
You are given vector &lt;int&gt;s <b>x</b>, <b>y</b>, and <b>prob</b>.
For each i, star i is located at coordinates (<b>x</b>[i],<b>y</b>[i]) on the map.
The probability that star i will be visible when Ciel looks at the sky is <b>prob</b>[i]/1000.<br></br>
<br></br>
<br></br>
In the evening Ciel is going to take a look at the night sky.
She will find the constellation in the sky, and mark all the visible stars on her map.
She will then compute the area of the convex hull of the visible stars.
Compute and return the expected value of that area.</td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>Constellation</td></tr><tr><td>Method:</td><td>expectation</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double expectation(vector &lt;int&gt; x, vector &lt;int&gt; y, vector &lt;int&gt; prob)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td>&#160;&#160;&#160;&#160;</td></tr><tr><td></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>The events that represent the visibility of individual stars are mutually independent. Thus you may assume that the visibility of each star was independently generated at random with the given probability, just before Ciel looked at the sky.</td></tr><tr><td align="center" valign="top">-</td><td>Whenever there is a line that contains all the visible stars, the area of their convex hull is 0.</td></tr><tr><td align="center" valign="top">-</td><td>Return values with absolute or relative error at most 1e-9 will be accepted as correct.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>x</b> will contain between 3 and 50 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>x</b>, <b>y</b> and <b>prob</b> will contain same number of elements.</td></tr><tr><td align="center" valign="top">-</td><td>Each element in <b>x</b> will be between -100 and 100, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element in <b>y</b> will be between -100 and 100, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element in <b>prob</b> will be between 1 and 1,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>There will be no two stars at the same position.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,0,1}</pre></td></tr><tr><td><pre>{0,1,0}</pre></td></tr><tr><td><pre>{500,500,500}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.0625</pre></td></tr><tr><td><table><tr><td colspan="2">We have 3 points (0,0), (0,1), (1,0), all of them have 50% probability to be visible. We have 0.5^3 probability to see all 3 stars, and the area will be 0.5, in all other cases, the area will be 0. So the expectation is 0.5^4 = 0.0625.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,1,0,1}</pre></td></tr><tr><td><pre>{0,0,1,1}</pre></td></tr><tr><td><pre>{1000,1000,400,800}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.6000000000000001</pre></td></tr><tr><td><table><tr><td colspan="2">Stars 0 and 1 are always visible, thus there are four possible cases:
<ul>
<li>All four stars are visible with probability 0.4 * 0.8 = 0.32, and in that case the area is 1.</li>
<li>With probability (1-0.4)*0.8 = 0.48 star 3 is the only invisible star, and the area is 0.5.</li>
<li>With probability 0.4*(1-0.8) = 0.08 star 2 is the only invisible star, and the area is 0.5.</li>
<li>Finally, with probability (1-0.4)*(1-0.8) = 0.12 only stars 0 and 1 are visible, and the area is 0.</li>
</ul>
Thus, the answer is 0.32 * 1 + 0.48 * 0.5 + 0.08 * 0.5 + 0.12 * 0 = 0.6.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{-1,-1,-1,0,0,0,1,1,1}</pre></td></tr><tr><td><pre>{-1,0,1,-1,0,1,-1,0,1}</pre></td></tr><tr><td><pre>{500,500,500,500,500,500,500,500,500}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1.9375</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,0,1,2,2}</pre></td></tr><tr><td><pre>{0,1,2,1,0}</pre></td></tr><tr><td><pre>{1000,500,200,500,1000}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1.3</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,5,5,8,2,6,9}</pre></td></tr><tr><td><pre>{3,6,4,2,5,7,9}</pre></td></tr><tr><td><pre>{100,400,200,1000,400,900,600}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 12.888936</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">5)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{-100,100,-100,100,-42,57,-34,76,35,-75,-54,10,43}</pre></td></tr><tr><td><pre>{-100,-100,100,100,52,-57,-84,63,-43,50,63,10,-44}</pre></td></tr><tr><td><pre>{1000,1000,1000,1000,342,747,897,325,678,34,53,6,253}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 40000.0</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
